/* Global styles for Dhwani - Elegant editorial design */
@import url('/fonts/fonts.css');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    --font-serif: 'Crimson Text', Georgia, serif;
    --font-serif-body: 'Crimson Text', Georgia, serif;

    /* Font loading optimization */
    font-display: swap;
  }

  /* Prevent font flickering */
  html.fonts-loading {
    visibility: hidden;
  }

  html {
    font-family: var(--font-sans);
    scroll-behavior: smooth;
    font-size: 17px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    @apply text-ink-medium;
    background: #ffffff;
    font-weight: 400;
    line-height: 1.75;
  }

  ::selection {
    @apply bg-accent-wash text-ink;
  }

  /* Typography - Editorial refined with improved hierarchy */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-serif);
    @apply text-ink;
    font-weight: 600;
    letter-spacing: -0.015em;
    line-height: 1.15;
  }

  /* Optical sizing for large headings */
  h1 {
    font-weight: 500;
    letter-spacing: -0.025em;
  }

  h2 {
    font-weight: 550;
    letter-spacing: -0.02em;
  }

  /* Focus styles */
  *:focus-visible {
    @apply outline-none;
    outline: 2px solid theme('colors.accent');
    outline-offset: 2px;
  }

  /* Screen reader only */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
}

@layer components {
  /* Interactive link styles */
  a {
    transition: color 200ms ease, border-color 200ms ease;
  }

  a:hover {
    @apply text-accent;
  }

  /* Header hover effects */
  header a:hover {
    @apply text-ink;
  }

  /* Line clamp utilities */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Prose content */
  .prose-content {
    font-family: var(--font-serif-body);
    @apply max-w-[680px];
    font-size: 1.25rem;
    color: #1a1614;
    line-height: 1.85;
    font-weight: 400;
  }

  .prose-content h1 {
    font-family: var(--font-serif);
    @apply text-3xl md:text-4xl mt-16 mb-6 first:mt-0;
    font-weight: 600;
    line-height: 1.2;
    letter-spacing: -0.025em;
    color: #1a1614;
  }

  .prose-content h2 {
    font-family: var(--font-serif);
    @apply text-2xl md:text-3xl mt-16 mb-6;
    font-weight: 600;
    line-height: 1.25;
    letter-spacing: -0.02em;
    color: #1a1614;
  }

  .prose-content h3 {
    font-family: var(--font-serif);
    @apply text-xl md:text-2xl mt-14 mb-5;
    font-weight: 600;
    line-height: 1.3;
    letter-spacing: -0.015em;
    color: #1a1614;
  }

  .prose-content p {
    @apply mb-8;
    font-weight: 400;
    line-height: 1.85;
  }

  .prose-content ul, .prose-content ol {
    @apply mb-8 pl-8;
    line-height: 1.85;
  }

  .prose-content li {
    @apply mb-4;
    font-weight: 400;
  }

  .prose-content strong {
    font-weight: 700;
    color: #1a1614;
  }

  .prose-content em {
    font-style: italic;
  }

  .prose-content a {
    color: #e85d3e;
    text-decoration: none;
    border-bottom: 1.5px solid #facabd;
    transition: border-color 0.2s ease;
  }

  .prose-content a:hover {
    border-bottom-color: #e85d3e;
  }

  .prose-content blockquote {
    font-family: var(--font-serif);
    @apply text-xl my-10 pl-10 border-l-4 py-5;
    border-left-color: #facabd;
    line-height: 1.65;
    font-style: italic;
    font-weight: 400;
    color: #4a4441;
  }

  .prose-content blockquote::before {
    content: '"';
    position: absolute;
    left: -0.15rem;
    top: -0.5rem;
    font-size: 6rem;
    color: theme('colors.accent-wash');
    font-family: var(--font-serif);
    line-height: 1;
    opacity: 0.6;
  }

  /* Scroll-triggered fade-in animations */
  .fade-in-up {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
  }

  .fade-in-up.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .fade-in {
    opacity: 0;
    transition: opacity 0.8s ease-out;
  }

  .fade-in.visible {
    opacity: 1;
  }

  /* Staggered animations for children */
  .stagger-children > * {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  .stagger-children.visible > *:nth-child(1) { transition-delay: 0.1s; }
  .stagger-children.visible > *:nth-child(2) { transition-delay: 0.2s; }
  .stagger-children.visible > *:nth-child(3) { transition-delay: 0.3s; }
  .stagger-children.visible > *:nth-child(4) { transition-delay: 0.4s; }

  .stagger-children.visible > * {
    opacity: 1;
    transform: translateY(0);
  }

  /* Hover scale for interactive elements */
  .hover-lift {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .hover-lift:hover {
    transform: translateY(-2px);
  }
}

/* Reduced motion support for accessibility */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .fade-in-up,
  .fade-in,
  .stagger-children > * {
    opacity: 1 !important;
    transform: none !important;
  }
}
